<head><meta charset="utf-8"><meta name="viewport" content="width=720,user-scalable=no"><title>Fancy Detail Setting Window</title><script src="js/jquery-3.2.1.min.js"></script><link href="//fonts.googleapis.com/earlyaccess/notosanskr.css" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Aldrich" rel="stylesheet"><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"><style>.content,.header{position:fixed;left:0;right:0}body,html{margin:0;padding:0}html{background:#F0F0F0}*{font-family:'맑은 고딕'}.header{height:56px;background:#9C77D5;color:#FFF;box-shadow:0 0 4px #000;line-height:56px;padding-left:30px;font-size:18px;top:0;z-index:9}.content{top:56px;bottom:0;overflow:auto}.content>.group{position:relative;background:#FFF;box-shadow:0 1px 2px rgba(0,0,0,.5);max-width:680px;margin:48px auto 0}.content>.group::before{display:block;content:attr(label);position:absolute;height:48px;line-height:48px;font-size:14px;top:-48px}.content>.group>.item{padding:15px;border-bottom:1px solid #E8E8E8;text-align:right;line-height:20px;min-height:20px;cursor:pointer}.content>.group>.item:last-child{border-bottom:0}.content>.group>.item::before{content:attr(label);float:left}.content>.group>.item>.switch{display:inline-block;width:30px;height:12px;border-radius:15px;background:rgba(128,128,128,.5);margin-right:8px;margin-top:5px;position:relative}.item>input,.view{float:right;margin-right:10px}.content>.group>.item>.switch::before{height:16px;width:16px;left:-4px;position:absolute;background:#EFEFEF;content:" ";top:-2px;border-radius:8px;box-shadow:0 1px 2px rgba(0,0,0,.5);transition:.1s;z-index:4}.content>.group>.item>.switch[data-checked=true]::before{left:16px;background:#4f2696}.content>.group>.item>.switch::after{content:" ";position:Absolute;left:0;top:0;height:12px;border-radius:6px;background:rgba(102,0,255,.5);width:0;transition:.1s}.content>.group>.item>.switch[data-checked=true]::after{width:24px}.viewAdvanced{color:#333;text-align:center;font-size:14px;margin-top:20px;margin-bottom:20px}.viewAdvanced::before{content:attr(label)}.viewAdvanced::after{font-size:10px;margin-left:10px;content:"▼"}.viewAdvanced[data-toggle=true]::after{content:"▲"}.view{display:inline-block;height:21px;font-size:12px;color:#AAA}.view::after{content:attr(after)}.view::before{content:attr(before)}input[type=range]{appearance:none;-webkit-appearance:none;outline:0;height:12px;background:rgba(128,128,128,.5);border-radius:6px;margin-top:4px}input[type=range]::-webkit-slider-thumb{appearance:none;-webkit-appearance:none;width:16px;height:16px;border-radius:8px;background:#EFEFEF;box-shadow:0 1px 2px rgba(0,0,0,.5);cursor:pointer}.coloreditor .pickslider,.coloreditor>.pickcolorx>.colorpicker{box-shadow:0 0 1px #555,0 0 1px #333,0 0 1px #333,0 0 1px #333,0 0 1px #333}input[type=range]::-moz-range-thumb{width:16px;height:16px;background:rgba(75,0,187,.5)}.content>.group>.item>select{-webkit-appearance:none;outline:0;border:none;border-bottom:2px solid rgba(102,0,255,.5);width:250px;text-align:center;background-image:url(./image/down.svg);background-repeat:no-repeat;background-position:100% 50%}.coloreditor{display:inline-block;position:relative;width:100%;height:319px;box-sizing:border-box;overflow:hidden;margin-bottom:5px}.coloreditor::before{content:attr(label);position:absolute;left:0;top:0;line-height:28px}.coloreditor:last-child{margin-bottom:0}.coloreditor>.backbg{background:#333;position:absolute;width:300px;top:28px;right:0;bottom:0}.coloreditor>.backbg::before{background:#333;position:absolute;content:" ";right:0;top:-28px;height:28px;width:90px}.coloreditor,.coloreditor *{-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-o-user-select:none;user-select:none}.coloreditor>.pickcolorx{width:256px;height:256px;position:absolute;right:39px;top:58px;background:linear-gradient(to right,#FFF 0,red 100%);overflow:hidden}.coloreditor>.pickcolorx>.colorarea{width:256px;height:256px;background:linear-gradient(to bottom,transparent 0,#000 100%)}.coloreditor>.pickcolorx>.colorpicker{width:7px;height:7px;position:absolute;left:255px;top:0;margin-left:-4px;margin-top:-4px;border:1px solid #FFF;border-radius:7px}.coloreditor>.hue,.coloreditor>.transparent{top:58px;height:256px;width:12px;position:absolute}.coloreditor>.hue{right:5px;background:linear-gradient(to bottom,red 0,#FF0 17%,#0F0 33%,#0FF 50%,#00F 67%,#F0F 83%,red 100%)}.coloreditor>.transparent{right:22px;background:url(./image/transparentbg.png)}.coloreditor>.transparent>.pickcolor{background:linear-gradient(to bottom,red 0,transparent 100%);width:100%;height:100%}.coloreditor>.pickedcolorbg{position:absolute;top:2px;right:2px;height:24px;width:86px;background:url(./image/transparentbg.png);color:#FFF}.coloreditor>.pickedcolorbg>.pickedcolor{height:100%;text-align:left;font-size:13px;line-height:24px;padding-left:6px;text-shadow:0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000}.coloreditor>.huearea,.coloreditor>.pickarea,.coloreditor>.transparentarea{position:Absolute;top:58px;height:256px}.coloreditor>.pickarea{right:39px;width:256px;z-index:10}.coloreditor>.huearea{right:5px;width:12px;z-index:11}.coloreditor>.transparentarea{right:22px;width:12px;z-index:10}.coloreditor .pickslider{width:12px;position:absolute;left:-1px;top:0;right:0;height:1px;border:1px solid #FFF}.coloreditor>.inputrgb{position:absolute;-webkit-appearance:none;background:rgba(0,0,0,.5);border:0;padding:2px;color:#FFF;z-index:15;width:68px;height:20px;outline:0}.coloreditor>.cr{right:226px;top:33px;width:70px}.coloreditor>.cg{right:152px;top:33px;width:70px}.coloreditor>.cb{right:78px;top:33px;width:70px}.coloreditor>.ca{right:5px;top:33px}.coloreditor>.xa,.coloreditor>.xb,.coloreditor>.xg,.coloreditor>.xr{color:#FFF;position:absolute;top:33px;width:8px;height:20px;line-height:20px;right:229px;text-decoration:none;font-style:normal;font-size:12px}.coloreditor>.xg{right:155px}.coloreditor>.xb{right:81px}.coloreditor>.xa{right:10px}.coloreditor>.reset{position:absolute;right:88px;top:0;width:28px;height:28px;background:#333;color:#FFF;text-align:center}.coloreditor>.reset>i{font-size:24px;line-height:28px}.imageurlpicker{display:inline-block;position:relative;width:100%;box-sizing:border-box;overflow:hidden}.imageurlpicker::before{content:attr(label);position:absolute;left:0;top:0;line-height:28px}.imageurlpicker>.imagearea{width:400px;height:300px;background:url(./image/transparentbg.png);border:2px solid #333;margin-left:246px;overflow:hidden}.imageurlpicker>.imagearea>.image{width:100%;height:100%}.imageurlpicker>.inputarea{width:100%;height:28px;background:#333;position:relative;margin-top:30px}.imageurlpicker>.inputarea>input{position:absolute;left:2px;top:2px;border:0;outline:0;width:calc(100% - 74px);padding:4px;box-sizing:border-box;height:26px}.imageurlpicker>.inputarea>.chk,.imageurlpicker>.inputarea>.deleteimg{position:absolute;color:#FFF;top:3px}.imageurlpicker>.inputarea>.chk{right:40px}.imageurlpicker>.inputarea>.deleteimg{right:8px}.imageurlpicker>.remotectrl{position:absolute;top:58px;right:404px;left:0;bottom:0;background:#333;cursor:default}.imageurlpicker>.remotectrl>.imagealign>button[data-checked=true],.imageurlpicker>.remotectrl>.sizeoption>button[data-checked=true]{background:rgba(205,171,255,.5);color:#FFF}.imageurlpicker>.remotectrl>textarea{position:absolute;left:2px;outline:0;bottom:2px;height:120px;width:244px;border:0;resize:none}.imageurlpicker>.remotectrl>.label{position:absolute;bottom:120px;left:0;color:#FFF;height:20px;line-height:18px;padding-left:10px;font-size:14px;content:"CSS Filter"}.imageurlpicker>.remotectrl>.imagealign{position:absolute;left:4px;top:22px;text-align:left;width:102px}.imageurlpicker>.remotectrl>.imagealign::before,.imageurlpicker>.remotectrl>.sizeoption::before{position:absolute;top:-20px;left:0;color:#FFF;height:20px;line-height:18px;padding-left:10px;font-size:14px;content:attr(label)}.imageurlpicker>.remotectrl>.imagealign>button{display:inline-block;width:32px;height:32px;margin-left:2px;margin-bottom:2px;border:none;font-size:20px;line-height:30px;outline:0}.imageurlpicker>.remotectrl>.sizeoption{width:130px;left:112px;top:22px;position:absolute}.imageurlpicker>.remotectrl>.sizeoption>button{display:block;width:100%;box-sizing:border-box;border:none;height:32px;margin-bottom:2px;outline:0}.resetbtn,.savebtn{position:fixed;right:30px;top:13px;z-index:999;border:none;background:#ab73ff;height:30px;line-height:26px;color:#FFF;box-shadow:0 0 3px rgba(75,0,187,.5);font-size:13px;width:80px;outline:0;border-radius:3px;transition:.4s}.resetbtn:hover,.savebtn:hover{filter:brightness(1.2);-webkit-filter:brightness(1.2)}.resetbtn{right:130px}.alarm::after{animation-name:alert;animation-duration:1s;animation-timing-function:linear;animation-iteration-count:infinite;border:1px solid #FFF;box-sizing:border-box;z-index:1000;position:absolute;content:" ";width:100%;height:100%;left:0;top:0;border-radius:3px;filter:drop-shadow(0 0 3px rgb(165, 97, 255));-webkit-filter:drop-shadow(0 0 3px rgb(165, 97, 255))}@keyframes alert{0%{transform:scale(1) scaleX(1)}100%{transform:scale(1.2) scaleY(1.32);opacity:0}}</style></head><body><div class="header" id="lang-setting">Setting</div><button onclick="colorSave()" class="savebtn" data-label="savebtn">SAVE</button> <button onclick="colorSave()" class="resetbtn" data-label="resetbtn">RESET</button><div class="content"><div class="group" label="User" data-id="user"><div class="item" label="Language" data-id="language">Auto...</div></div><div class="group" label="UI" data-id="ui"><div class="item" label="" data-id="nickhide"><div class="switch"></div></div><div class="item" label="" data-id="rankanim"><div class="switch"></div></div><div class="item" label="" data-id="numbanim"><div class="switch"></div></div><div class="item" label="" data-id="nickshorter"><select><option data-label="notuse" value="n0">Aquamarin Diamond (사용 안 함)</option><option data-label="nameval1" value="n1">Aquamarin D. (뒷 이름 줄이기)</option><option data-label="nameval2" value="n2">A. Diamond (앞 이름 줄이기)</option><option data-label="nameval3" value="n3">A. D. (모두 줄이기)</option></select></div></div><div class="group" label="Data" data-id="data"><div class="item" label="" data-id="hpsallview"><div class="switch"></div></div><div class="item" label="" data-id="displayhps"><div class="switch"></div></div></div><div class="viewAdvanced" label="Advanced Settings" data-id="advancedset"></div><div class="group" label="CSS" data-id="css" flag="advanced"><div class="item" label="Opacity" data-id="opacity"><input type="range" min="0" max="100" value="100" step="1"> <span class="view" after="%">100</span></div><div class="item"><div class="coloreditor" label="" data-id="bgcolor" notext="true" data-value="rgba(0,0,0,0.0)"></div><div class="imageurlpicker" label="" back="bgcolor" data-id="image"></div></div></div><div class="group" label="CSS" data-id="etcicon" flag="advanced"><div class="item"><div class="coloreditor" label="" notext="true" data-id="iconglow" data-value="#AB7813"></div></div></div><div class="group" label="CSS" data-id="rolecolor" flag="advanced"><div class="item"><div class="coloreditor" label="" notext="true" image="background-image:url(./image/icons.png); background-repeat:no-repeat; background-position:-96px -96px; background-size:240px 120px; width:24px; height:24px; filter:drop-shadow(0px 0px 1px ${iconglow}) drop-shadow(0px 0px 1px ${iconglow}); -webkit-filter:drop-shadow(0px 0px 1px ${iconglow}) drop-shadow(0px 0px 1px ${iconglow});" data-id="c_tanker" data-value="#0000A0"></div></div><div class="item"><div class="coloreditor" label="" notext="true" image="background-image:url(./image/icons.png); background-repeat:no-repeat; background-position:-96px -96px; background-size:240px 120px; width:24px; height:24px; filter:drop-shadow(0px 0px 1px ${iconglow}) drop-shadow(0px 0px 1px ${iconglow}); -webkit-filter:drop-shadow(0px 0px 1px ${iconglow}) drop-shadow(0px 0px 1px ${iconglow});" data-id="c_healer" data-value="#00A000"></div></div><div class="item"><div class="coloreditor" label="" notext="true" image="background-image:url(./image/icons.png); background-repeat:no-repeat; background-position:-96px -96px; background-size:240px 120px; width:24px; height:24px; filter:drop-shadow(0px 0px 1px ${iconglow}) drop-shadow(0px 0px 1px ${iconglow}); -webkit-filter:drop-shadow(0px 0px 1px ${iconglow}) drop-shadow(0px 0px 1px ${iconglow});" data-id="c_dps" data-value="#A00000"></div></div></div><div class="group" label="CSS" data-id="tankers" flag="advanced"><div class="item"><div class="coloreditor" label="" font="glapldf" notext="true" data-id="glapld" data-value="#88CCCC"></div><div class="coloreditor" label="" back="glapld" data-id="glapldf" data-value="#CCFFFF"></div></div><div class="item"><div class="coloreditor" label="" font="mrdwarf" notext="true" data-id="mrdwar" data-value="#921000"></div><div class="coloreditor" label="" back="mrdwar" data-id="mrdwarf" data-value="#FFCCAA"></div></div><div class="item"><div class="coloreditor" label="" font="drkf" notext="true" data-id="drk" data-value="#642324"></div><div class="coloreditor" label="" back="drk" data-id="drkf" data-value="#FFBB88"></div></div></div><div class="group" label="CSS" data-id="healers" flag="advanced"><div class="item"><div class="coloreditor" label="" font="cnjwhmf" notext="true" data-id="cnjwhm" data-value="#CFB090"></div><div class="coloreditor" label="" back="cnjwhm" data-id="cnjwhmf" data-value="#FFEEAA"></div></div><div class="item"><div class="coloreditor" label="" font="schf" notext="true" data-id="sch" data-value="#232898"></div><div class="coloreditor" label="" back="sch" data-id="schf" data-value="#EEFFEE"></div></div><div class="item"><div class="coloreditor" label="" font="astf" notext="true" data-id="ast" data-value="#D98028"></div><div class="coloreditor" label="" back="ast" data-id="astf" data-value="#FFFF99"></div></div><div class="item"><div class="coloreditor" label="" data-id="overhealcolor" data-value="#600000"></div></div></div><div class="group" label="CSS" data-id="dealers" flag="advanced"><div class="item"><div class="coloreditor" label="" font="pglmnkf" notext="true" data-id="pglmnk" data-value="#D9B028"></div><div class="coloreditor" label="" back="pglmnk" data-id="pglmnkf" data-value="#FFEE99"></div></div><div class="item"><div class="coloreditor" label="" font="lncdrgf" notext="true" data-id="lncdrg" data-value="#4968E1"></div><div class="coloreditor" label="" back="lncdrg" data-id="lncdrgf" data-value="#77CCFF"></div></div><div class="item"><div class="coloreditor" label="" font="rogninf" notext="true" data-id="rognin" data-value="#564848"></div><div class="coloreditor" label="" back="rognin" data-id="rogninf" data-value="#FF6699"></div></div><div class="item"><div class="coloreditor" label="" font="samf" notext="true" data-id="sam" data-value="#B1A066"></div><div class="coloreditor" label="" back="sam" data-id="samf" data-value="#FEFEFE"></div></div><div class="item"><div class="coloreditor" label="" font="arcbrdf" notext="true" data-id="arcbrd" data-value="#B4D143"></div><div class="coloreditor" label="" back="arcbrd" data-id="arcbrdf" data-value="#DDFF77"></div></div><div class="item"><div class="coloreditor" label="" font="mchf" notext="true" data-id="mch" data-value="#38B0B4"></div><div class="coloreditor" label="" back="mch" data-id="mchf" data-value="#BBFFCC"></div></div><div class="item"><div class="coloreditor" label="" font="thmblmf" notext="true" data-id="thmblm" data-value="#644696"></div><div class="coloreditor" label="" back="thmblm" data-id="thmblmf" data-value="#EEBBFF"></div></div><div class="item"><div class="coloreditor" label="" font="acnsmnf" notext="true" data-id="acnsmn" data-value="#288A3B"></div><div class="coloreditor" label="" back="acnsmn" data-id="acnsmnf" data-value="#DDFF77"></div></div><div class="item"><div class="coloreditor" label="" font="rdmf" notext="true" data-id="rdm" data-value="#E579A8"></div><div class="coloreditor" label="" back="rdm" data-id="rdmf" data-value="#FFFFFF"></div></div><div class="item"><div class="coloreditor" label="" font="lmbf" notext="true" data-id="lmb" data-value="#FFB000"></div><div class="coloreditor" label="" back="lmb" data-id="lmbf" data-value="#FFFFFF"></div></div></div><div style="height:35px"></div></div></body><script src="js/lang.js"></script><script>function colorSave(){$(".coloreditor").each(function(){option[$(this).attr("data-id")]=$(this).find(".pickedcolor").attr("data-value"),$(this).attr("data-hide","true"),$(this).css("height","28px")}),option.backgroundimg=$(".imageurlpicker>.imagearea>.image").attr("style"),window.opener.option=option,$(".savebtn").removeClass("alarm"),window.opener.setCSS(),saveSetting(),attrs()}function saveSetting(){localStorage.setItem("fancyset",JSON.stringify(option)),window.opener.option=option,null!=window.opener.lastCombat&&(window.opener.lastCombat.AttachPets(),window.opener.lastCombat.resort(),window.opener.lastCombatHPS.AttachPets(),window.opener.lastCombatHPS.resort()),window.opener.createHeader(),window.opener.listResort()}function setRGB(t,a,e,i,r){var n=$(t);if("undefined"==typeof a){var o=n.parent();setCEtoRGB(n,parseInt(o.find(".cr").val()),parseInt(o.find(".cg").val()),parseInt(o.find(".cb").val()),parseInt(o.find(".ca").val())/100)}else"number"!=typeof a?setCEtoRGB($(n[0]),a.r,a.g,a.b,a.a):setCEtoRGB(n,a,e,i,r)}function setCEtoRGB(t,a,e,i,r){var n={r:a,g:e,b:i,a:r};void 0==r&&(r=1),a/=255,e/=255,i/=255;var o,c,s=Math.max(a,e,i),d=Math.min(a,e,i),l=s,p=s-d;c=0==s?0:p/s,s==d?o=0:a==s?o=(e-i)/p+(e<i?6:0):e==s?o=(i-a)/p+2:i==s&&(o=(a-e)/p+4),o/=6,$editor=$(t),t.length>0?"item"==t[0].className?$editor=$(t[0]).find(".coloreditor"):"coloreditor"==t[0].className&&($editor=$(t[0])):"coloreditor"!=t.className?$editor=$(t).find(".coloreditor"):$editor=t,$editor.find(".colorpicker").css({left:Math.round(255*c)+"px",top:255-Math.round(255*l)+"px"}),$editor.find(".hue>.pickslider").css("top",Math.round(255*o)+"px"),$editor.find(".transparent>.pickslider").css("top",255-Math.round(255*n.a)+"px"),getColor($editor,!1);getSL($editor);$pick=$editor.find(".pickedcolor"),$editor.find(".cr").val(n.r),$editor.find(".cg").val(n.g),$editor.find(".cb").val(n.b),$editor.find(".ca").val(Math.round(100*n.a)),setRGBA($editor)}function getOpacity(t){return((255-$(t).parent().find(".transparent>.pickslider").position().top)/255).toFixed(2)}function getSL(t){$p=$(t).parent().find(".colorpicker").position();var a=$p.left/255*100,e=$p.top/255*100,i=((100-e)*((100-a)/100)+(100-e))/2;return[a/100,i/100]}function getHue(t){return $(t).parent().find(".hue>.pickslider").position().top/255}function rxx(t,a,e){var i,r,n;if(0==a)i=r=n=e;else{var o=function(t,a,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?t+6*(a-t)*e:e<.5?a:e<2/3?t+(a-t)*(2/3-e)*6:t},c=e<.5?e*(1+a):e+a-e*a,s=2*e-c;i=o(s,c,t+1/3),r=o(s,c,t),n=o(s,c,t-1/3)}return[Math.round(255*i),Math.round(255*r),Math.round(255*n)]}function getColor(t,a){$(".savebtn").addClass("alarm");var e,i,a,r=getHue(t),n=getSL(t),o=getOpacity(t);if(0==n[0])e=i=a=n[1];else{var c=function(t,a,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?t+6*(a-t)*e:e<.5?a:e<2/3?t+(a-t)*(2/3-e)*6:t},s=n[1]<.5?n[1]*(1+n[0]):n[1]+n[0]-n[1]*n[0],d=2*n[1]-s;e=c(d,s,r+1/3),i=c(d,s,r),a=c(d,s,r-1/3)}e=Math.round(255*e),i=Math.round(255*i),a=Math.round(255*a);var l=rxx(r,1,.5);$editor=$(t),t.length>0?"coloreditor"==t[0].className?$editor=$(t[0]):"item"==t[0].className?$editor=$(t[0]).find(".coloreditor"):$editor=$(t[0]).parent():("coloreditor"!=t.className&&($editor=$(t).parent()),"item"==t.className&&($editor=$(t))),$editor.find(".pickcolorx").css({background:"-webkit-gradient(linear, left top, right top, from(#FFF), to(rgb("+l[0]+","+l[1]+","+l[2]+")))"}),$editor.find(".pickcolor").css({background:"-webkit-gradient(linear, left top, left bottom, from(rgb("+e+","+i+","+a+")), to(rgba("+e+","+i+","+a+",0)))"}),void 0!=a&&a&&($editor.find(".cr").val(e),$editor.find(".cg").val(i),$editor.find(".cb").val(a),$editor.find(".ca").val(Math.round(100*o)),setRGBA($editor))}function setRGBA(t){setTimeout(function(){var a="rgba("+t.find(".cr").val()+","+t.find(".cg").val()+","+t.find(".cb").val()+","+(t.find(".ca").val()/100).toFixed(2)+")";void 0!=t.attr("back")?(t.find(".pickedcolor").attr("data-value",a),t.find(".pickedcolor").css("color",a),$(document).find('[data-id="'+t.attr("back")+'"]>div>.pickedcolor').each(function(){$(this).css("color",a)})):void 0!=t.attr("font")?(t.find(".pickedcolor").attr("data-value",a),t.find(".pickedcolor").css("background",a),$(document).find('[data-id="'+t.attr("font")+'"]>div>.pickedcolor').each(function(){$(this).css("background",a)})):(t.find(".pickedcolor").attr("data-value",a),t.find(".pickedcolor").css("background",a))},100)}function colorSet(t,a){if(void 0==a){$(t).is(".inputrgb")&&(t=$(t).parent());var a=getstrtorgb($(t).attr("data-value"));a.r=parseInt(""==$(t).find(".cr").val()?0:$(t).find(".cr").val()),a.g=parseInt(""==$(t).find(".cg").val()?0:$(t).find(".cg").val()),a.b=parseInt(""==$(t).find(".cb").val()?0:$(t).find(".cb").val()),a.a=parseInt(""==$(t).find(".ca").val()?0:$(t).find(".ca").val())/100,console.log($(t))}else $(t).find(".cr").val(a.r),$(t).find(".cg").val(a.g),$(t).find(".cb").val(a.b),$(t).find(".ca").val(100*a.a);var e=a.r,i=a.g,r=a.b;e/=255,i/=255,r/=255;var n,o,c=Math.max(e,i,r),s=Math.min(e,i,r),d=c,l=c-s;o=0==c?0:l/c,c==s?n=0:e==c?n=(i-r)/l+(i<r?6:0):i==c?n=(r-e)/l+2:r==c&&(n=(e-i)/l+4),n/=6;var p=rxx(n,1,.5);console.log(o,d),$(t).find(".colorpicker").css({left:Math.round(255*o)+"px",top:255-Math.round(255*d)+"px"}),$(t).find(".hue>.pickslider").css("top",Math.round(255*n)+"px"),$(t).find(".transparent>.pickslider").css("top",255-Math.round(255*a.a)+"px"),$(t).find(".pickcolorx").css({background:"-webkit-gradient(linear, left top, right top, from(#FFF), to(rgb("+p[0]+","+p[1]+","+p[2]+")))"}),$(t).find(".pickcolor").css({background:"-webkit-gradient(linear, left top, left bottom, from(rgb("+a.r+","+a.g+","+a.b+")), to(rgba("+a.r+","+a.g+","+a.b+",0)))"}),setRGBA($(t))}function attrs(){$(".coloreditor").each(function(){if(void 0!=$(this).attr("image")){var t=$(this).attr("image"),a=t;try{t=t.match(/\$\{([^}]+)\}/gim);for(var e in t)void 0!=option[t[e].replace(/\$\{(.*?)\}/,"$1")]&&(a=a.replace(t[e],option[t[e].replace(/\$\{(.*?)\}/,"$1")]));a+=" margin:0 auto;",$(this).find(".pickedcolor>div").length>0?$(this).find(".pickedcolor>div").attr("style",a):$(this).find(".pickedcolor").append('<div style="'+a+'"></div>')}catch(t){}}})}function getstrtorgb(t){var a,e,i,r,n=/rgb\(([0-9\s]*?),([0-9\s]*?),([0-9\s]*?)\)/,o=/rgba\(([0-9\s]*?),([0-9\s]*?),([0-9\s]*?),([0-9.\s]*?)\)/,c=/#([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})/;return r=1,c.test(t)?(a=parseInt(t.match(c)[1],16),e=parseInt(t.match(c)[2],16),i=parseInt(t.match(c)[3],16)):o.test(t)?(a=parseInt(t.match(o)[1]),e=parseInt(t.match(o)[2]),i=parseInt(t.match(o)[3]),r=parseFloat(t.match(o)[4])):n.test(t)&&(a=parseInt(t.match(n)[1]),e=parseInt(t.match(n)[2]),i=parseInt(t.match(n)[3])),{r:a,g:e,b:i,a:r}}var set=JSON.parse(localStorage.getItem("fancyset"));null!=set&&(option=set),$("select").change(function(){option[$(this).parent().attr("data-id")]=$(this).val(),window.opener.setCSS(),saveSetting()}),$(".coloreditor").each(function(){var t,a,e=!1,i=$(this),r=(i.offsetX,i.offsetY,!1),n=this;$(this).html('<div class="reset" title="Reset Default"><i class="material-icons">refresh</i></div><div class="backbg"></div><i class="xr">R</i><i class="xg">G</i><i class="xb">B</i><i class="xa">A</i><input class="inputrgb cr" type="number" min="0" max="255" stap="1" label="R" /><input class="inputrgb cg" type="number" min="0" max="255" stap="1" label="G" /><input class="inputrgb cb" type="number" min="0" max="255" stap="1" label="B" /><input class="inputrgb ca" type="number" min="0" max="100" stap="1" label="A" /><div class="pickcolorx"><div class="colorarea"></div><div class="colorpicker"></div></div><div class="hue"><div class="pickslider"></div></div><div class="transparent"><div class="pickcolor"></div><div class="pickslider"></div></div><div class="pickedcolorbg"><div class="pickedcolor" style="background:rgba(255, 0, 0, 1)" data-hide="true">1 Aa 가 あア</div></div><div class="pickarea"></div><div class="huearea"></div><div class="transparentarea"></div>'),void 0!=$(this).attr("notext")&&$(this).find(".pickedcolor").html(""),colorSet(this,getstrtorgb($(this).attr("data-value"))),attrs(),$(this).find(".reset").click(function(){setRGB(n,getstrtorgb($(n).attr("data-value")))}),$(this).find(".pickedcolor").click(function(){"true"==$(this).attr("data-hide")?($(".coloreditor").css("height","28px"),$(this).parent().parent().css("height","319px")):$(this).parent().parent().css("height","28px");var t="true"==$(this).attr("data-hide")?"false":"true";return $(".coloreditor").attr("data-hide","true"),$(this).attr("data-hide",t),!1}),$(this).css("height","28px"),$(this).find("input").change(function(t){setRGB(t.target),colorSet(this)}),$(this).find("input").on("input",function(t){setRGB(t.target),colorSet(this)}),$(this).find("input").on("mousewheel",function(t){return $(this).val(parseInt($(this).val())+Math.round(t.originalEvent.wheelDelta/60)),parseInt($(this).attr("min"))>$(this).val()?$(this).val($(this).attr("min")):parseInt($(this).attr("max"))<$(this).val()&&$(this).val($(this).attr("max")),setRGB(t.target),colorSet(this),!1}),$(window).mousemove(function(i){try{if(e){var n=i.pageX-$(t).offset().left,o=i.pageY-$(t).offset().top;n<0&&(n=0),o<0&&(o=0),n>255&&(n=255),o>255&&(o=255),$(t).parent().find(".colorpicker").css({left:n+"px",top:o+"px"}),getColor(t,!0)}if(r){var o=i.pageY-$(t).offset().top;o<0&&(o=0),o>255&&(o=255),a?($(t).parent().find(".hue>.pickslider").css("top",o+"px"),getColor(t,!0)):($(t).parent().find(".transparent>.pickslider").css("top",o+"px"),getColor(t,!0))}}catch(t){}}).mousedown(function(i){"pickarea"==i.target.className&&(e=!0,t=i.target),"huearea"!=i.target.className&&"transparentarea"!=i.target.className||(t=i.target,r=!0,"transparentarea"==i.target.className?a=!1:"huearea"==i.target.className&&(a=!0))}).mouseup(function(t){try{e=!1,r=!1}catch(t){}})}),$("input[type=range]").change(function(){return $(this).parent().find(".view").text($(this).val()),option[$(this).parent().attr("data-id")]=$(this).val(),saveSetting(),!1}),$("input[type=range]").on("input",function(){return $(this).parent().find(".view").text($(this).val()),option[$(this).parent().attr("data-id")]=$(this).val(),saveSetting(),!1}),$(".switch").click(function(){"true"!=$(this).attr("data-checked")?$(this).attr("data-checked","true"):$(this).attr("data-checked","false"),void 0!=$(this).parent().attr("data-id")&&(option[$(this).parent().attr("data-id")]="true"==$(this).attr("data-checked"),saveSetting())}),$(".item").click(function(t){if("item"==t.target.className&&$(this).find(".switch").length>0){var a=$(this).find(".switch");"true"!=a.attr("data-checked")?a.attr("data-checked","true"):a.attr("data-checked","false"),void 0!=$(this).attr("data-id")&&(option[$(this).attr("data-id")]="true"==a.attr("data-checked"),saveSetting())}}),$(".imageurlpicker").each(function(){$(this).html('<div class="inputarea"><input type="text" value="" placeholder="Image URL"/><div class="chk"><i class="material-icons">launch</i></div><div class="deleteimg"><i class="material-icons">delete</i></div></div><div class="imagearea"><div class="image"></div></div><div class="remotectrl"><textarea placeholder="EX) blur(2px) contrast(1.25) ... etc"></textarea><div class="label" data-label="cssfilter"></div><div class="options imagealign" data-id="imgalign" label=""></div><dov class="options sizeoption" data-id="imgsizeopt"><button data-checked="true" data-label="widthfit"></button><button data-checked="false" data-label="heightfit"></button><button data-checked="false" data-label="original"></button></div></div>');var t=this;$(this).find(".imagealign").append('<button data-checked="false">↖</button>'),$(this).find(".imagealign").append('<button data-checked="false">↑</button>'),$(this).find(".imagealign").append('<button data-checked="false">↗</button>'),$(this).find(".imagealign").append('<button data-checked="false">←</button>'),$(this).find(".imagealign").append('<button data-checked="true">×</button>'),$(this).find(".imagealign").append('<button data-checked="false">→</button>'),$(this).find(".imagealign").append('<button data-checked="false">↙</button>'),$(this).find(".imagealign").append('<button data-checked="false">↓</button>'),$(this).find(".imagealign").append('<button data-checked="false">↘</button>'),$(this).find(".imagealign>button").click(function(){$(t).find(".imagealign>button").attr("data-checked","false"),$(this).attr("data-checked","true"),$(t).find(".chk").trigger("click")}),$(this).find(".sizeoption>button").click(function(){$(t).find(".sizeoption>button").attr("data-checked","false"),$(this).attr("data-checked","true"),$(t).find(".chk").trigger("click")}),$(this).find(".deleteimg").click(function(){$(t).find(".image").removeAttr("style")}),$(this).find("[data-label]").each(function(){$(this).html(curLang.label[$(this).attr("data-label")])}),$(this).find("[data-id]").each(function(){void 0!=curLang.settings[$(this).attr("data-id")]&&$(this).attr("label",curLang.settings[$(this).attr("data-id")])}),$(this).find(".chk").click(function(){if(""!=$(t).find("input").val().trim()){switch($(t).find(".image").css({"background-image":"url("+$(t).find("input").val()+")","background-repeat":"no-repeat",filter:$(t).find("textarea").val().trim(),webkitFilter:$(t).find("textarea").val().trim()}),$(t).find(".sizeoption>[data-checked=true]").attr("data-label")){case"widthfit":$(t).find(".image").css("background-size","100% auto");break;case"heightfit":$(t).find(".image").css("background-size","auto 100%");break;case"original":$(t).find(".image").css("background-size","auto auto")}switch($(t).find(".imagealign>[data-checked=true]").html()){case"↖":$(t).find(".image").css("background-position","left top");break;case"↑":$(t).find(".image").css("background-position","center top");break;case"↗":$(t).find(".image").css("background-position","right top");break;case"←":$(t).find(".image").css("background-position","left center");break;case"×":$(t).find(".image").css("background-position","center center");break;case"→":$(t).find(".image").css("background-position","right center");break;case"↙":$(t).find(".image").css("background-position","left bottom");break;case"↓":$(t).find(".image").css("background-position","center bottom");break;case"↘":$(t).find(".image").css("background-position","right bottom")}}})});for(var i in option)if("backgroundimg"==i){switch($(".imageurlpicker>.imagearea>.image").attr("style",option[i]),$(".imageurlpicker .sizeoption>button").attr("data-checked","false"),$(".imageurlpicker textarea").val($(".imageurlpicker>.imagearea>.image").css("filter")),"none"==$(".imageurlpicker textarea").val()&&$(".imageurlpicker textarea").val($(".imageurlpicker>.imagearea>.image").css("webkitFilter")),$(".imageurlpicker input").val($(".imageurlpicker>.imagearea>.image").css("background-image")),$(".imageurlpicker input").val($(".imageurlpicker input").val().replace(/url\((.+)\)/,"$1").replace(/"/,"")),$(".imageurlpicker>.imagearea>.image").css("background-size")){case"100%":$(".imageurlpicker .sizeoption>[data-label=widthfit]").attr("data-checked","true");break;case"auto 100%":$(".imageurlpicker .sizeoption>[data-label=heightfit]").attr("data-checked","true");break;case"auto":$(".imageurlpicker .sizeoption>[data-label=original]").attr("data-checked","true")}switch($(".imageurlpicker .imagealign>button").attr("data-checked","false"),$(".imageurlpicker>.imagearea>.image").css("background-position")){case"0% 0%":$($(".imageurlpicker .imagealign>button")[0]).attr("data-checked","true");break;case"0% 50%":$($(".imageurlpicker .imagealign>button")[1]).attr("data-checked","true");break;case"0% 100%":$($(".imageurlpicker .imagealign>button")[2]).attr("data-checked","true");break;case"50% 0%":$($(".imageurlpicker .imagealign>button")[3]).attr("data-checked","true");break;case"50% 50%":$($(".imageurlpicker .imagealign>button")[4]).attr("data-checked","true");break;case"50% 100%":$($(".imageurlpicker .imagealign>button")[5]).attr("data-checked","true");break;case"100% 0%":$($(".imageurlpicker .imagealign>button")[6]).attr("data-checked","true");break;case"100% 50%":$($(".imageurlpicker .imagealign>button")[7]).attr("data-checked","true");break;case"100% 100%":$($(".imageurlpicker .imagealign>button")[8]).attr("data-checked","true")}}else if(0!=$("[data-id="+i+"]").length)if("boolean"==typeof option[i])$("[data-id="+i+"]").find(".switch").attr("data-checked",option[i]);else if($("[data-id="+i+"]").find("select").length>0)$("[data-id="+i+"]").find("select").val(option[i]);else{var $item=$("[data-id="+i+"]");if($item.find(".colorpicker").length>0){var rgba=getstrtorgb(option[i]);colorSet($item,rgba)}else $item.find("input").val(option[i]),$item.find(".view").text(option[i])}$("input, select").change(function(){$(".savebtn").addClass("alarm")})</script>